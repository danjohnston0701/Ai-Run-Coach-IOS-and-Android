# AI Run Coach

## Overview

AI Run Coach is a cross-platform mobile application built with Expo/React Native that provides AI-powered running coaching. The app allows users to track runs with GPS, view run history and insights, set fitness goals, discover running events, and receive personalized coaching. It features a dark-themed UI optimized for runners with real-time tracking capabilities.

## User Preferences

Preferred communication style: Simple, everyday language.

## System Architecture

### Frontend Architecture
- **Framework**: Expo SDK 54 with React Native 0.81, targeting iOS, Android, and web platforms
- **Navigation**: React Navigation v7 with a nested navigator pattern - a root stack containing a bottom tab navigator with five tabs (Home, History, Events, Goals, Profile), each containing its own stack navigator
- **State Management**: TanStack React Query for server state, React hooks for local state
- **Styling**: React Native StyleSheet with a custom theme system supporting dark mode (default). Uses Reanimated for animations and expo-haptics for tactile feedback
- **Authentication**: Token-based auth stored in expo-secure-store (native) or localStorage (web), with a custom useAuth hook managing auth state

### Backend Architecture
- **Server**: Express.js with TypeScript running on Node.js
- **API Design**: RESTful endpoints prefixed with `/api`, configured for CORS with Replit domains and localhost for development
- **Database**: PostgreSQL with Drizzle ORM for type-safe queries and migrations
- **Storage Layer**: Abstracted through an `IStorage` interface with in-memory implementation (MemStorage) that can be swapped for database-backed storage

### Project Structure
- `/client` - React Native/Expo frontend code with screens, components, hooks, and navigation
- `/server` - Express backend with routes and storage logic
- `/shared` - Shared schema definitions using Drizzle ORM and Zod validation
- `/assets` - App icons, splash screens, and static images
- `/migrations` - Database migration files generated by Drizzle Kit

### Key Design Patterns
- **Path Aliases**: `@/` maps to `./client`, `@shared/` maps to `./shared` for clean imports
- **Component Library**: Reusable themed components (Button, Card, Input, StatCard, etc.) with consistent styling
- **Error Handling**: ErrorBoundary component wrapping the app with customizable fallback UI
- **Platform Compatibility**: Components like KeyboardAwareScrollViewCompat handle platform differences between native and web

## External Dependencies

### Third-Party Services
- **External API**: Connects to an AI Run Coach backend API via `EXPO_PUBLIC_API_URL` environment variable for user data, runs, goals, and events
- **Location Services**: expo-location for GPS tracking during run sessions

### Database
- **PostgreSQL**: Connected via `DATABASE_URL` environment variable, managed with Drizzle ORM
- **Schema**: Currently defines a users table with id, username, and password fields

### Key NPM Packages
- **UI/UX**: expo-linear-gradient, expo-blur, expo-haptics, react-native-reanimated, react-native-svg
- **Maps**: react-native-maps for route visualization
- **Fonts**: Inter and Nunito from @expo-google-fonts
- **Security**: expo-secure-store for secure token storage on native platforms

### Environment Variables Required
- `DATABASE_URL` - PostgreSQL connection string
- `EXPO_PUBLIC_API_URL` or `EXPO_PUBLIC_DOMAIN` - Backend API endpoint
- `REPLIT_DEV_DOMAIN` / `REPLIT_DOMAINS` - For CORS configuration in Replit environment